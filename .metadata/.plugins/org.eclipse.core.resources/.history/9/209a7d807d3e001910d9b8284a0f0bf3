package froehlicheZahl;

import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;
import java.util.stream.IntStream;

public class FroehlicheZahlCalculator {
	public boolean isFroehlicheZahl(int zahl) {
		int[] ziffern;
		List<Integer> quadrierteZiffern;
		int ergebnis = zahl;
		int ctr = 0;
		
		while(isZahlZerlegbar(ergebnis) && ctr < 100) {
			ziffern  = zahlZerlegen(ergebnis);
			
			quadrierteZiffern = quadrateBilden(ziffern);
			
			
			ergebnis = summeBilden(quadrierteZiffern);
			
			ctr++;
		}
		
		return ergebnis == 1;
	}

	private int summeBilden(List<Integer> quadrierteZiffern) {
		int ergebnis = 0;
		
		for(int i : quadrierteZiffern) {
			ergebnis += i;
		}
		
		return ergebnis;
	}

	private List<Integer> quadrateBilden(int[] ziffern) {
		ziffern.stream().map(i -> i*i);
		
		List<Integer> quadrierteZiffern = new ArrayList<Integer>();
		
		for(int i : ziffern) {
			quadrierteZiffern.add(i * i);
		}
		
		return quadrierteZiffern;
	}

	private List<Integer> zahlZerlegen(Integer zahl) {
		return String.valueOf(zahl).chars().map(Character::getNumericValue).boxed().collect(Collectors.toList());
		
//		char[] charZiffern = zahl.toString().toCharArray();
//		List<Integer> ziffern = new ArrayList<Integer>();
//		
//		for (char i : charZiffern) {
//			ziffern.add(Character.getNumericValue(i));
//		}
//		
//		return ziffern;
	}

	private boolean isZahlZerlegbar(int zahl) {
		return zahl >= 10;
	}

}
